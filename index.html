<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
<style>
  body {
    background-color: #f7f7f7; /* Light gray background */
    color: #333; /* Darker text color */
    font-family: "Prompt", sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    margin: 0;
    text-align: center; /* Center text */
  }
        h1 {
        font-size: 44px;
        font-weight: bold;
        color: blue;
        margin-bottom: 0px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }
      h3 {
        font-size: 48px;
        font-weight: bold;
        color: #fb0446;
        margin-bottom: 1px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }
  .clock {
    font-family: 'Arial', sans-serif;
    font-size: 125px; /* Larger font size */
    font-weight: bold; /* Make it bold */
    margin-bottom: 1px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2); /* Add a subtle shadow */
    background: linear-gradient(to right, blue, indigo, violet, blue);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .date {
        font-size: 30px; /* Slightly larger date */
        font-weight: 600;
        margin-bottom: 2px;
      }

  .course {
        font-size: 32px;
        font-weight: 600;
        margin-bottom: 0px;
      }
  .input-form {
    margin-bottom: 20px;
    padding: 15px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .input-field {
    margin: 10px 0;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
    width: 250px;
  }

  .update-button {
    background-color: #d11500;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
  }

  .update-button:hover {
    background-color: #45a049;
  }

  .floating-btn {
    position: fixed;
    right: 20px;
    bottom: 20px;
    z-index: 9999;
    background-color: #2563eb;
    color: #ffffff;
    border: none;
    border-radius: 9999px;
    padding: 12px 18px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 6px 16px rgba(0,0,0,0.2);
  }
  .floating-btn:hover { background-color: #1d4ed8; }

  /* Form layout improvements */
  .input-form { max-width: 720px; width: 100%; text-align: left; }
  .input-form h2 { margin: 0 0 12px 0; font-size: 20px; color: #111827; }
  .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px 16px; }
  .form-group { display: flex; flex-direction: column; align-items: flex-start; }
  .input-label { font-size: 14px; color: #374151; margin-bottom: 6px; }
  .input-field { width: 100%; box-sizing: border-box; }
  .full-row { grid-column: 1 / -1; }
  .form-actions { display: flex; justify-content: center; margin-top: 12px; }
  @media (max-width: 640px) { .form-grid { grid-template-columns: 1fr; } }
  /* Render newlines in extra info */
  #extraInfo { white-space: pre-line; }
  .fs-hint { font-size: 12px; color: #6b7280; margin-top: 60px; }
</style>
  <head>
    <meta charset="UTF-8" />
    <title>นาฬิกาดิจิตอลในห้องสอบ</title>
  </head>
  <body>
    <div id="displaySection" style="display: none;">
    </br>
    <div id="logoSection" class="container" style="display: none;">
      <img src="https://polsci.soc.ku.ac.th/wp-content/uploads/2020/02/KU5-1-1024x406.png" alt="KU Logo" style="width: 240px; margin-bottom: 10px;" />
    </div>
    <div style="background: linear-gradient(135deg, #f0f0f0, #ffffff);
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
    padding: 15px;
    width: 600px; /* Fixed width */
    height: 200px; /* Fixed height */
    margin-bottom: 1px;
    border: 2px solid #ddd;
    display: flex;
    flex-direction: column;
    justify-content: center; /* Vertically center content */
    align-items: center; /* Horizontally center content */
    text-align: center;">
    <div class="date" id="date">วันจันทร์ 1 มกราคม พ.ศ. 2568</div>
    <!-- ไม่ต้องแก้ไข -->
    <div class="clock" id="clock">00:00:00</div>
    </div>
    <div>
      <h1>ห้องสอบ LH3-331</h1>
    </div>
    <div style="display: flex;
    flex-direction: row;
    justify-content: center; /* Vertically center content */
    align-items: center;
    margin-top: 0.0em;
    margin-bottom: 0.0em;">
      <h2 class="course" id="subjectDisplay">วิชา ปฏิบัติการเคมีทั่วไป </h2>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <h2 class="course">รหัสวิชา 01403112</h2>
    </div>
    <div style="margin-top: 0.0em;"> <h3>หมดเวลา 16:30 น.</h3> </div>
      <div id="extraInfo" class="course">
        <h2>ข้อมูลเพิ่มเติม</h2>
      </div>
    </div>


        <button id="editBtn" class="floating-btn" style="display:none" onclick="showEditForm()">แก้ไขข้อมูล</button>

          <div class="input-form">
        <h2>ข้อมูลการสอบ</h2>
        <div class="form-grid">
          <div class="form-group">
            <label class="input-label" for="subjectInput">ชื่อวิชา</label>
            <input type="text" id="subjectInput" class="input-field" placeholder="กรอกชื่อวิชา">
          </div>
          <div class="form-group">
            <label class="input-label" for="courseCodeInput">รหัสวิชา</label>
            <input type="text" id="courseCodeInput" class="input-field" placeholder="กรอกรหัสวิชา">
          </div>
          <div class="form-group">
            <label class="input-label" for="roomInput">ห้องสอบ</label>
            <input type="text" id="roomInput" class="input-field" placeholder="กรอกเลขห้องสอบ">
          </div>
          <div class="form-group">
            <label class="input-label" for="timeoutInput">ข้อความเวลาในการสอบ</label>
            <input type="text" id="timeoutInput" class="input-field" placeholder="ใส่ข้อความ (เช่น หมดเวลา 16:30 น.)">
          </div>
          <div class="form-group full-row">
            <label class="input-label" for="extraInfoInput">ข้อมูลเพิ่มเติม</label>
            <textarea id="extraInfoInput" class="input-field" rows="3" placeholder="กรอกข้อมูลเพิ่มเติม"></textarea>
          </div>
        </div>
        <div class="form-actions">
          <button onclick="updateInfo()" class="update-button">ยืนยันและแสดงเต็มจอ</button>
        </div>
        <div class="fs-hint">หากต้องการออกจากโหมดเต็มจอ ให้กดปุ่ม ESC</div>
        <script>
            function updateInfo() {
          const subject = document.getElementById('subjectInput').value;
          const courseCode = document.getElementById('courseCodeInput').value;
          const room = document.getElementById('roomInput').value;
          const timeout = document.getElementById('timeoutInput').value;

          if (subject) {
              document.getElementById('subjectDisplay').textContent = 'วิชา: ' + subject;
          }
          if (courseCode) {
              document.getElementsByTagName('h2')[1].textContent = 'รหัสวิชา ' + courseCode;
          }
          if (room) {
              document.getElementsByTagName('h1')[0].innerHTML = 'ห้องสอบ ' + room;
          }
          if (timeout) {
              document.getElementsByTagName('h3')[0].innerHTML = timeout;
          }
          const extraRaw = document.getElementById('extraInfoInput')?.value ?? '';
          const wrappedExtra = wrapByChars(extraRaw.trim(), 40);
          const extraEl = document.getElementById('extraInfo');
          if (extraEl) extraEl.textContent = wrappedExtra;

          // Show display, hide form, and enter fullscreen
          document.getElementById('displaySection').style.display = 'block';
          const logo = document.getElementById('logoSection');
          if (logo) logo.style.display = 'block';
          const form = document.querySelector('.input-form');
          if (form) form.style.display = 'none';

          // Hide edit button while (attempting) fullscreen
          const editBtn = document.getElementById('editBtn');
          if (editBtn) editBtn.style.display = 'none';

          const el = document.documentElement;
          if (el.requestFullscreen) {
            el.requestFullscreen();
          } else if (el.webkitRequestFullscreen) {
            el.webkitRequestFullscreen();
          }
          // Ensure button visibility is updated if fullscreen is blocked
          if (!document.fullscreenElement && !document.webkitFullscreenElement) {
            updateFloatingBtnVisibility();
          }
            }
        </script>
    </br>
    </div>
    <script>
      function updateClock() {
        const now = new Date();

        // เวลา
        const hours = String(now.getHours()).padStart(2, "0");
        const minutes = String(now.getMinutes()).padStart(2, "0");
        const seconds = String(now.getSeconds()).padStart(2, "0");
        const timeString = `${hours}:${minutes}:${seconds}`;
        document.getElementById("clock").textContent = timeString;

        // วันที่และวันในสัปดาห์
        const days = [
          "อาทิตย์",
          "จันทร์",
          "อังคาร",
          "พุธ",
          "พฤหัสบดี",
          "ศุกร์",
          "เสาร์",
        ];
        const months = [
          "มกราคม",
          "กุมภาพันธ์",
          "มีนาคม",
          "เมษายน",
          "พฤษภาคม",
          "มิถุนายน",
          "กรกฎาคม",
          "สิงหาคม",
          "กันยายน",
          "ตุลาคม",
          "พฤศจิกายน",
          "ธันวาคม",
        ];

        const dayName = days[now.getDay()];
        const day = now.getDate();
        const month = months[now.getMonth()];
        const year = now.getFullYear() + 543;

        const dateString = `วัน${dayName} ${day} ${month} พ.ศ. ${year}`;
        document.getElementById("date").textContent = dateString;
      }

      setInterval(updateClock, 1000);
      updateClock(); // เรียกครั้งแรกทันที
    </script>
    <script>
      function wrapByChars(text, width) {
        if (!text) return '';
        const lines = text.split(/\r?\n/);
        const wrapped = lines.map(line => {
          const parts = [];
          for (let i = 0; i < line.length; i += width) {
            parts.push(line.slice(i, i + width));
          }
          return parts.join('\n');
        });
        return wrapped.join('\n');
      }
      function showEditForm() {
        const form = document.querySelector('.input-form');
        const display = document.getElementById('displaySection');
        const logo = document.getElementById('logoSection');
        if (form) form.style.display = 'block';
        if (display) display.style.display = 'none';
        if (logo) logo.style.display = 'none';
        const editBtn = document.getElementById('editBtn');
        if (editBtn) editBtn.style.display = 'none';

        // Exit fullscreen if still in it
        if (document.fullscreenElement && document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.webkitFullscreenElement && document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        }

        // Scroll to form for convenience
        if (form) form.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }

      function updateFloatingBtnVisibility() {
        const inFs = !!(document.fullscreenElement || document.webkitFullscreenElement);
        const displayVisible = (document.getElementById('displaySection')?.style.display !== 'none');
        const formVisible = (document.querySelector('.input-form')?.style.display !== 'none');
        const btn = document.getElementById('editBtn');
        if (!btn) return;
        // Show button only when: not fullscreen, display is shown, and form is hidden
        if (!inFs && displayVisible && !formVisible) {
          btn.style.display = 'inline-flex';
        } else {
          btn.style.display = 'none';
        }
      }

      document.addEventListener('fullscreenchange', updateFloatingBtnVisibility);
      document.addEventListener('webkitfullscreenchange', updateFloatingBtnVisibility);
    </script>
  </body>
</html>
